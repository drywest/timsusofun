<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Overlay</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <div id="root">
    <div id="chat"></div>
  </div>

  <script>
    (function(){
      const m = location.pathname.match(/^\/overlay\/([^\/?#]+)/);
      if(!m) return;
      const cid = decodeURIComponent(m[1] || "");
      if(!cid) return;

      const qs = new URLSearchParams(location.search);
      if(!qs.get("channelId")){
        qs.set("channelId", cid);
        const u = new URL(location.href);
        u.search = qs.toString();
        history.replaceState(null, "", u.toString());
      }
    })();
  </script>
  <script src="/app.js" defer></script>
</body>
</html>
